webpackJsonp([1],{"+cgv":function(e,t){},"3f40":function(e,t){},"4Yhl":function(e,t){},"4qOc":function(e,t){},GE4R:function(e,t){},MnaI:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var n=i("VU/8")({name:"App"},o,!1,function(e){i("MnaI")},null,null).exports,r=i("/ocq"),l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"hello"},[i("el-row",[i("el-button",[e._v("默认按钮")]),e._v(" "),i("el-button",{attrs:{type:"primary"}},[e._v("主要按钮")]),e._v(" "),i("el-button",{attrs:{type:"success"}},[e._v("成功按钮")]),e._v(" "),i("el-button",{attrs:{type:"info"}},[e._v("信息按钮")]),e._v(" "),i("el-button",{attrs:{type:"warning"}},[e._v("警告按钮")]),e._v(" "),i("el-button",{attrs:{type:"danger"}},[e._v("危险按钮")])],1)],1)},staticRenderFns:[]};i("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},l,!1,function(e){i("GE4R")},"data-v-d0330090",null).exports;var s={data:function(){return{loginForm:{username:"",pwd:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"}]},loadingflag:!1}},methods:{submit:function(){var e=this;this.$refs.loginForm.validate(function(t){if(!t)return!1;e.loadingflag=!0,e.$Http("login.php","POST",e.loginForm).then(function(t){1===t.code?(sessionStorage.setItem("nihao",t.data),e.$message({message:"登录成功",type:"success"}),setTimeout(function(){e.$router.push("/main/projectlist")},1500)):(e.$message.error(t.message||"用户名或密码错误"),e.loadingflag=!1)}).catch(function(t){e.$message.error("登录失败")})})}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("h2",[e._v("网站后台管理系统")]),e._v(" "),i("div",{staticClass:"content"},[i("el-form",{ref:"loginForm",staticClass:"loginForm",attrs:{model:e.loginForm,"status-icon":"",rules:e.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"用户名：",prop:"username"}},[i("el-input",{attrs:{type:"text",placeholder:"请输入用户名","auto-complete":"off"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"密 码：",prop:"pwd"}},[i("el-input",{attrs:{type:"password",placeholder:"请输入密码","auto-complete":"off"},model:{value:e.loginForm.pwd,callback:function(t){e.$set(e.loginForm,"pwd",t)},expression:"loginForm.pwd"}})],1)],1),e._v(" "),i("el-row",{staticClass:"row btn-wrap"},[i("el-button",{staticClass:"button",attrs:{type:"primary",loading:e.loadingflag},on:{click:e.submit}},[e._v(e._s(this.loadingflag?"正在登陆...":"登录"))])],1)],1)])},staticRenderFns:[]};var d=i("VU/8")(s,c,!1,function(e){i("wlJq")},"data-v-c92fa844",null).exports,u={data:function(){return{}},methods:{toProjectList:function(){this.$router.push("/main/projectlist")},toNewsList:function(){this.$router.push("/main/newslist")},toAddProject:function(){this.$router.push("/main/addproject")},toAddNews:function(){this.$router.push("/main/addnews")},toIntroduce:function(){this.$router.push("/main/introduce")},toUser:function(){this.$router.push("/main/user")},toAbout:function(){this.$router.push("/main/about")},loginoutHandle:function(){var e=this,t={key:sessionStorage.getItem("nihao")||""};this.$Http("loginout.php","POST",t).then(function(t){1===t.code?(sessionStorage.setItem("nihao",""),e.$router.push("/login"),e.$message.success("退出登录成功")):e.$message.error("退出登录失败")}).catch(function(){e.$message.error("退出登录失败")})}}},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("el-container",{staticClass:"el-cont"},[i("el-header",[i("div",{staticClass:"main-logo"},[i("span",[e._v("官网后台管理系统")]),e._v(" "),i("span",{staticClass:"eng"},[e._v("background management system")])]),e._v(" "),i("div",{staticClass:"main-rightside"},[i("span",{staticClass:"right-user"},[e._v("admin")]),e._v(" "),i("div",{staticClass:"right-loginout",on:{click:e.loginoutHandle}},[e._v("退出")])])]),e._v(" "),i("el-container",[i("el-aside",{attrs:{width:"200px"}},[i("el-menu",{attrs:{"default-active":"1-1","background-color":"#545c64","text-color":"#fff","active-text-color":"#409EFF"}},[i("el-submenu",{attrs:{index:"1"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-menu"}),e._v(" "),i("span",[e._v("项目管理")])]),e._v(" "),i("el-menu-item-group",[i("el-menu-item",{attrs:{index:"1-1"},on:{click:e.toProjectList}},[e._v("项目列表")]),e._v(" "),i("el-menu-item",{attrs:{index:"1-2"},on:{click:e.toAddProject}},[e._v("新增项目")])],1)],2),e._v(" "),i("el-submenu",{attrs:{index:"2"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-menu"}),e._v(" "),i("span",[e._v("新闻管理")])]),e._v(" "),i("el-menu-item-group",[i("el-menu-item",{attrs:{index:"2-1"},on:{click:e.toNewsList}},[e._v("新闻列表")]),e._v(" "),i("el-menu-item",{attrs:{index:"2-2"},on:{click:e.toAddNews}},[e._v("新增新闻")])],1)],2),e._v(" "),i("el-menu-item",{attrs:{index:"5"},on:{click:e.toAbout}},[i("i",{staticClass:"el-icon-setting"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("关于我们")])]),e._v(" "),i("el-menu-item",{attrs:{index:"3"},on:{click:e.toUser}},[i("i",{staticClass:"el-icon-setting"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("账号管理")])]),e._v(" "),i("el-menu-item",{attrs:{index:"4"},on:{click:e.toIntroduce}},[i("i",{staticClass:"el-icon-document"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("使用说明")])])],1)],1),e._v(" "),i("el-main",[i("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var f=i("VU/8")(u,m,!1,function(e){i("bK70")},"data-v-65ee1fa9",null).exports,p=i("woOf"),g=i.n(p),h=i("bOdI"),v=i.n(h),b={data:function(){return v()({tableData:[],fileList:[],dialogVisible:!1,editDialogVisible:!1,dialogImageUrl:"",itemForm:{id:"",title:"",introduce:""},tableLoading:!0,payload:{targetId:null,key:sessionStorage.getItem("nihao")||""},targetTitle:"图片管理",imgCheckFlag:!0,viewImgDialogVisible:!1},"dialogImageUrl","")},computed:{imgUpoadUrl:function(){return baseUrl+"item.php?action=imgadd"}},methods:{imgManage:function(e){var t=this;this.$Http("item.php?action=queryitemimg","POST",{itemId:e.uid}).then(function(e){1===e.code?(e.data&&e.data.map(function(e,t){return e.url=baseUrl+e.url,e}),t.fileList=e.data,t.dialogVisible=!0):t.$message.warning("图片加载失败")}).catch(function(e){t.$message({type:"info",message:"查询失败"})}),this.targetTitle="项目图片 - "+e.title,this.payload.targetId=e.uid},imgModalcloseHandler:function(){this.$refs.imgUpload.clearFiles(),this.fileList=[]},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.viewImgDialogVisible=!0},handleimgBeforeUpload:function(e){if(e.size/1024/1024>2.5)return this.imgCheckFlag=!1,this.$message.warning("图片大小超过限制，最大2.4M"),!1;this.imgCheckFlag=!0},handleimgBeforeRemove:function(e,t){var i=this;this.imgCheckFlag&&this.$Http("item.php?action=delimg","POST",{id:e.name}).then(function(e){1===e.code?i.$message.success("图片删除成功"):i.$message.warning("图片删除失败")}).catch(function(e){i.$message.warning("图片删除失败")})},onExceed:function(e,t){this.$message.warning("图片数量超过限制，最多上传5张呢")},delItem:function(e){var t=this;console.log(e.id),this.$confirm("此操作将永久删除该项目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$Http("item.php?action=del","POST",{id:e.id,uid:e.uid}).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.queryTableData()}).catch(function(e){t.$message({type:"info",message:"删除失败"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},openEditModel:function(e){this.editDialogVisible=!0;var t=e.id,i=e.title,a=e.introduce;this.itemForm={id:t,title:i,introduce:a}},editItem:function(){var e=this,t=g()({},this.itemForm,{id:1*this.itemForm.id});this.$Http("item.php?action=edit","POST",t).then(function(t){console.log(t),1===t.code?(e.$message.success("修改成功!"),e.editDialogVisible=!1,e.queryTableData()):e.$message.error("修改失败!")}).catch(function(t){e.$message.error("修改失败!")})},queryTableData:function(){var e=this;this.tableLoading=!0,this.$Http("itemlist.php","POST",{test:123}).then(function(t){e.tableData=t.data.reverse(),e.tableLoading=!1}).catch(function(){e.$message.error("数据加载失败"),e.tableLoading=!1})},moveUp:function(e,t){var i=this;if(console.log(e),console.log(t),e<=0)return this.$message.warning("已经是第一个了"),!1;var a={curid:t.id,nextid:this.tableData[e-1].id};this.tableLoading=!0,this.$Http("sort.php?action=sort","POST",a).then(function(e){1===e.code?i.queryTableData():(i.$message.error("排序失败"),i.tableLoading=!1)}).catch(function(){i.$message.error("排序失败"),i.tableLoading=!1})},moveDown:function(e,t){var i=this;if(console.log(e),console.log(t),e>=this.tableData.length-1)return this.$message.warning("已经是最后一个了"),!1;var a={curid:t.id,nextid:this.tableData[e+1].id};this.tableLoading=!0,this.$Http("sort.php?action=sort","POST",a).then(function(e){1===e.code?i.queryTableData():(i.$message.error("排序失败"),i.tableLoading=!1)}).catch(function(){i.$message.error("排序失败"),i.tableLoading=!1})}},mounted:function(){this.queryTableData()}},w={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"items-container"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),e._v(" "),i("el-table-column",{attrs:{prop:"title",label:"项目名称",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"introduce",label:"项目介绍"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"260px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.imgManage(t.row)}}},[e._v("图片管理")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.openEditModel(t.row)}}},[e._v("修改")]),e._v(" "),i("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(i){e.delItem(t.row)}}},[e._v("删除")])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"排序",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",plain:"",size:"mini",circle:!0,icon:"el-icon-arrow-up"},on:{click:function(i){e.moveUp(t.$index,t.row)}}}),e._v(" "),i("el-button",{attrs:{type:"primary",plain:"",size:"mini",circle:!0,icon:"el-icon-arrow-down"},on:{click:function(i){e.moveDown(t.$index,t.row)}}})]}}])})],1),e._v(" "),i("el-dialog",{attrs:{width:"60%",title:e.targetTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.imgModalcloseHandler}},[i("div",[i("el-upload",{ref:"imgUpload",attrs:{action:e.imgUpoadUrl,"list-type":"picture-card",data:e.payload,disabled:!1,limit:5,"on-exceed":e.onExceed,"file-list":e.fileList,"before-upload":e.handleimgBeforeUpload,"on-preview":e.handlePictureCardPreview,"before-remove":e.handleimgBeforeRemove}},[i("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{attrs:{width:"70%",title:"查看大图",top:"10vh",visible:e.viewImgDialogVisible},on:{"update:visible":function(t){e.viewImgDialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),e._v(" "),i("el-dialog",{attrs:{title:"项目详情／修改",visible:e.editDialogVisible},on:{"update:visible":function(t){e.editDialogVisible=t}}},[i("div",[i("el-form",{ref:"form",attrs:{model:e.itemForm,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"项目名称"}},[i("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:e.itemForm.title,callback:function(t){e.$set(e.itemForm,"title",t)},expression:"itemForm.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"项目介绍"}},[i("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入内容"},model:{value:e.itemForm.introduce,callback:function(t){e.$set(e.itemForm,"introduce",t)},expression:"itemForm.introduce"}})],1)],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.editItem}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var _=i("VU/8")(b,w,!1,function(e){i("yiWn")},null,null).exports,$={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[i("el-table-column",{attrs:{prop:"title",label:"新闻标题",width:"300"}}),e._v(" "),i("el-table-column",{attrs:{prop:"text",label:"新闻介绍"}}),e._v(" "),i("el-table-column",{attrs:{prop:"addtime",label:"更新时间",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){e.handleDetailNews(t.row)}}},[e._v("详细")]),e._v(" "),i("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(i){e.handleDelNews(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-dialog",{attrs:{title:e.targetTitle,width:"70%",visible:e.DialogVisible},on:{"update:visible":function(t){e.DialogVisible=t}}},[i("div",{staticClass:"detail-time"},[e._v(e._s(e.targetTime))]),e._v(" "),i("div",{attrs:{id:"newsContentRef"},domProps:{innerHTML:e._s(e.targetContent)}}),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.DialogVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var y=i("VU/8")({data:function(){return{tableData:[],tableLoading:!0,DialogVisible:!1,newsForm:{title:"",content:""},targetContent:"",targetTitle:"新闻详情",targetTime:""}},methods:{queryTableData:function(){var e=this;this.tableLoading=!0,this.$Http("newslist.php","POST").then(function(t){e.tableData=t.data.reverse(),e.tableLoading=!1}).catch(function(){e.$message.error("数据加载失败"),e.tableLoading=!1})},handleDelNews:function(e){var t=this;this.$confirm("此操作将永久删除该条新闻, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$Http("news.php?action=del","POST",{id:e.id}).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.queryTableData()}).catch(function(e){t.$message({type:"info",message:"删除失败"})})}).catch(function(){})},handleDetailNews:function(e){this.targetContent=e.content,this.targetTitle=e.title,this.targetTime=e.addtime,this.DialogVisible=!0}},mounted:function(){this.queryTableData()}},$,!1,function(e){i("4Yhl")},null,null).exports,x={data:function(){return{dialogVisible:!1,dialogImageUrl:"",loadingflag:!1,form:{title:"",introduce:"",fileList:[]},rules:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],introduce:[{required:!0,message:"项目介绍不能为空",trigger:"blur"}],fileList:[{required:!0,message:"请至少上传一张项目图片（建议图片压缩后上传，每张不大于500kb）",trigger:"change"}]},payload:{targetId:null,key:sessionStorage.getItem("nihao")||""}}},computed:{imgUpoadUrl:function(){return baseUrl+"item.php?action=imgadd"}},methods:{onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loadingflag=!0,e.$Http("item.php?action=add","POST",e.form).then(function(t){1===t.code?(e.payload.targetId=t.uid,e.$refs.upload.submit()):(e.loadingflag=!1,e.$message.error("修改添加项目失败!"))}).catch(function(t){e.loadingflag=!1,e.$message.error("添加项目失败!")})})},handleRemove:function(){},onExceed:function(e,t){this.$message.warning("图片数量超过限制，最多上传5张呢")},imgBeforeUpHandle:function(e,t){if(e&&"ready"===e.status){if(!(e.size/1024/1024<2.5))return this.$message.warning("图片大小超过限制，最大2.4M"),!1;this.form.fileList=t}},imgUploadSuccessHandle:function(e,t,i){var a=this,o=!0;i.forEach(function(e){"success"!==e.status&&(o=!1)}),o&&(this.$message.success("添加项目成功!"),window.setTimeout(function(){a.loadingflag=!1,a.$router.push("/main/projectlist")},500))},imgUploadErrorHandle:function(e,t,i){var a=this;this.$message.warning("添加项目成功,图片上传异常，请到项目列表页查看"),window.setTimeout(function(){a.loadingflag=!1,a.$router.push("/main/projectlist")},500)}}},k={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"addproject-container"},[i("el-breadcrumb",{staticClass:"bread-menu",attrs:{separator:"/"}},[i("el-breadcrumb-item",[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("项目管理")]),e._v(" "),i("el-breadcrumb-item",[e._v("新增项目")])],1),e._v(" "),i("div",{staticClass:"form-wrap"},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"项目名称",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"项目介绍",prop:"introduce"}},[i("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入内容"},model:{value:e.form.introduce,callback:function(t){e.$set(e.form,"introduce",t)},expression:"form.introduce"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"项目图片",prop:"fileList"}},[i("el-upload",{ref:"upload",attrs:{action:e.imgUpoadUrl,"list-type":"picture-card",size:"mini",data:e.payload,"file-list":e.form.fileList,"auto-upload":!1,limit:5,"on-exceed":e.onExceed,"on-change":e.imgBeforeUpHandle,"on-success":e.imgUploadSuccessHandle,"on-error":e.imgUploadErrorHandle,"on-remove":e.handleRemove}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",loading:e.loadingflag},on:{click:e.onSubmit}},[e._v(e._s(this.loadingflag?"正在新增...":"新增项目"))])],1)],1)],1)],1)},staticRenderFns:[]};var U=i("VU/8")(x,k,!1,function(e){i("Zvzt")},null,null).exports,C=i("G0J2"),T=i.n(C),D={data:function(){return{dialogVisible:!1,dialogImageUrl:"",loadingflag:!1,form:{title:"",text:"",content:"",fileList:[]},rules:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],text:[{required:!0,message:"新闻介绍不能为空",trigger:"blur"}],content:[{required:!0,message:"新闻内容不能为空",trigger:"blur"}],fileList:[{required:!0,message:"请上传标题图标（不大于100kb）",trigger:"change"}]},editorOption:{placeholder:"请编辑新闻内容",modules:{toolbar:[["bold","italic","underline","strike"],["blockquote"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["link","image"]]}},payload:{targetId:null,key:sessionStorage.getItem("nihao")||""}}},components:{quillEditor:C.quillEditor},computed:{imgUpoadUrl:function(){return baseUrl+"news.php?action=imgadd"}},methods:{onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loadingflag=!0,e.$Http("news.php?action=add","POST",e.form).then(function(t){1===t.code?(e.payload.targetId=t.id,e.$refs.upload.submit()):(e.loadingflag=!1,e.$message.error("新闻发布失败!"))}).catch(function(t){e.loadingflag=!1,e.$message.error("新闻发布失败!")})})},imgUploadSuccessHandle:function(){var e=this;this.$message.success("新闻发布成功!"),window.setTimeout(function(){e.loadingflag=!1,e.$router.push("/main/newslist")},500)},imgBeforeUpHandle:function(e,t){e&&"ready"===e.status&&(this.form.fileList=t)},handleRemove:function(){},onEditorBlur:function(){console.log(this.content)},onEditorFocus:function(){},onEditorChange:function(){}}},F={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"addproject-container"},[i("el-breadcrumb",{staticClass:"bread-menu",attrs:{separator:"/"}},[i("el-breadcrumb-item",[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("新闻管理")]),e._v(" "),i("el-breadcrumb-item",[e._v("新增新闻")])],1),e._v(" "),i("div",{staticClass:"form-wrap"},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"新闻标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入新闻标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"新闻介绍",prop:"text"}},[i("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"新闻内容",prop:"content"}},[i("quill-editor",{ref:"myQuillEditor",attrs:{options:e.editorOption},on:{blur:function(t){e.onEditorBlur(t)},focus:function(t){e.onEditorFocus(t)},change:function(t){e.onEditorChange(t)}},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"标题图片",prop:"fileList"}},[i("el-upload",{ref:"upload",attrs:{action:e.imgUpoadUrl,"list-type":"picture-card",size:"mini",limit:1,data:e.payload,"file-list":e.form.fileList,"auto-upload":!1,"show-file-list":!0,"on-success":e.imgUploadSuccessHandle,"on-change":e.imgBeforeUpHandle,"on-remove":e.handleRemove}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",loading:e.loadingflag},on:{click:e.onSubmit}},[e._v(e._s(this.loadingflag?"正在发布...":"发布新闻"))])],1)],1)],1)],1)},staticRenderFns:[]};var L=i("VU/8")(D,F,!1,function(e){i("Pllc")},null,null).exports,S={data:function(){return{dialogVisible:!1,dialogImageUrl:"",loadingflag:!1,formDisable:!0,imgChangeFlag:!1,form:{introduce:"",address:"",phone:"",email:"",keyword:"",description:"",fileList:[]},rules:{introduce:[{required:!0,message:"公司简介不能为空",trigger:"blur"}],address:[{required:!0,message:"联系地址不能为空",trigger:"blur"}],phone:[{required:!0,message:"联系电话不能为空",trigger:"blur"}],email:[{required:!0,message:"联系邮箱不能为空",trigger:"blur"}],keyword:[{required:!0,message:"关键字不能为空",trigger:"blur"}],description:[{required:!0,message:"网站描述不能为空",trigger:"blur"}],fileList:[{required:!0,message:"请至少上传一张项目图片（建议图片压缩后上传，每张不大于500kb）",trigger:"change"}]},payload:{targetId:null,key:sessionStorage.getItem("nihao")||""}}},computed:{imgUpoadUrl:function(){return baseUrl+"about.php?action=imgupdate"},btnText:function(){return this.formDisable?"修改信息":this.loadingflag?"正在保存":"保存信息"}},methods:{queryAbout:function(){var e=this;this.$Http("about.php?action=query","POST",{}).then(function(t){if(1===t.code){var i=t.data[0];i&&i.imgurl&&(i.fileList=[{name:"",url:baseUrl+i.imgurl}]),i.introduce=i.introduce.replace(/\<br\>/g,"\n"),e.form=i}else e.loadingflag=!1,e.$message.error("更新失败!")}).catch(function(t){e.loadingflag=!1,e.$message.error("更新失败!")})},onSubmit:function(){var e=this;if(this.formDisable)return this.formDisable=!1,!1;this.$refs.form.validate(function(t){if(!t)return!1;e.loadingflag=!0,e.form.introduce=e.form.introduce.replace(/[\n\r]/gm,"<br>"),e.form.time=(new Date).getTime(),e.$Http("about.php?action=edit","POST",e.form).then(function(t){e.form.introduce=e.form.introduce.replace(/\<br\>/g,"\n"),1===t.code?e.imgChangeFlag?(e.payload.targetId=t.id,e.$refs.upload.submit()):(e.$message.success("信息更新成功!"),e.loadingflag=!1,e.formDisable=!0):(e.loadingflag=!1,e.$message.error("信息更新失败!"))}).catch(function(t){e.loadingflag=!1,e.$message.error("信息更新失败!")})})},handleRemove:function(){this.imgChangeFlag=!0,this.form.fileList=[]},onExceed:function(e,t){this.$message.warning("图片数量超过限制，最多上传1张呢")},imgBeforeUpHandle:function(e,t){if(e&&"ready"===e.status){if(!(e.size/1024/1024<2.5))return this.$message.warning("图片大小超过限制，最大2.4M"),!1;this.form.fileList=t}},imgUploadSuccessHandle:function(e,t,i){var a=this,o=!0;i.forEach(function(e){"success"!==e.status&&(o=!1)}),o&&(this.imgChangeFlag=!1,this.$message.success("信息更新成功!"),window.setTimeout(function(){a.loadingflag=!1,a.formDisable=!0},100))},imgUploadErrorHandle:function(e,t,i){var a=this;this.$message.warning("信息更新成功,图片上传异常,请到关于我们查看"),window.setTimeout(function(){a.loadingflag=!1,a.formDisable=!0},100)}},mounted:function(){this.queryAbout()}},q={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"addproject-container"},[i("el-breadcrumb",{staticClass:"bread-menu",attrs:{separator:"/"}},[i("el-breadcrumb-item",[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("关于我们")])],1),e._v(" "),i("div",{staticClass:"form-wrap"},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,disabled:e.formDisable,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"公司简介",prop:"introduce"}},[i("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入公司简介"},model:{value:e.form.introduce,callback:function(t){e.$set(e.form,"introduce",t)},expression:"form.introduce"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"联系地址",prop:"address"}},[i("el-input",{attrs:{placeholder:"请输入联系地址"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[i("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"邮箱地址",prop:"email"}},[i("el-input",{attrs:{placeholder:"请输入邮箱地址"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"关键字",prop:"keyword"}},[i("el-input",{attrs:{placeholder:"请输入网站关键字,以英文逗号隔开"},model:{value:e.form.keyword,callback:function(t){e.$set(e.form,"keyword",t)},expression:"form.keyword"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"网站描述",prop:"description"}},[i("el-input",{attrs:{placeholder:"请输入网站描述"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"背景图片",prop:"fileList"}},[i("el-upload",{ref:"upload",attrs:{action:e.imgUpoadUrl,"list-type":"picture-card",size:"mini",data:e.payload,"file-list":e.form.fileList,"auto-upload":!1,limit:2,"on-exceed":e.onExceed,"on-change":e.imgBeforeUpHandle,"on-success":e.imgUploadSuccessHandle,"on-error":e.imgUploadErrorHandle,"on-remove":e.handleRemove}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1),e._v(" "),i("el-form",{attrs:{"label-width":"80px"}},[i("el-form-item",[i("el-button",{attrs:{type:"primary",loading:e.loadingflag},on:{click:e.onSubmit}},[e._v(e._s(e.btnText))])],1)],1)],1)],1)},staticRenderFns:[]};var H=i("VU/8")(S,q,!1,function(e){i("ghnD")},null,null).exports,I={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"introduce"},[i("el-breadcrumb",{staticClass:"bread-menu",attrs:{separator:"/"}},[i("el-breadcrumb-item",[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("使用说明")])],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("span",[e._v("请使用chrome、火狐、360浏览器、qq浏览器、uc浏览器打开本网站，以获得更好的体验。")])]),e._v(" "),i("el-col",{attrs:{span:24}},[i("span",[e._v("功能介绍")]),e._v(" "),i("span",[e._v("项目列表的增、删、改、查，项目图片的上传、更新、删除；新闻列表的增、删")])]),e._v(" "),i("el-col",{attrs:{span:24}},[i("span",[e._v("注意事项")]),e._v(" "),i("span",[e._v("图片：项目图片限制每个项目最多上传5张，用于官网banner轮播图展示，项目图片每张限制大小2.4M，尽量将图片无损压缩后上传，大小500K以内最好；新闻内容图片支持直接粘贴，新闻图片尽量小，太大可能会出现新闻发布不成功的情况")])])],1)],1)},staticRenderFns:[]};var V=i("VU/8")({},I,!1,function(e){i("zkmf")},null,null).exports,E={data:function(){return{loadingflag:!1,form:{pwd:"",newpwd:"",newpwd2:""},rules:{pwd:[{required:!0,message:"原始密码不能为空",trigger:"blur"}],newpwd:[{required:!0,message:"新密码不能为空",trigger:"blur"}],newpwd2:[{required:!0,message:"新密码不能为空",trigger:"blur"}]}}},methods:{onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;var i=e.form,a=i.pwd,o=i.newpwd;if(o===i.newpwd2){var n={pwd:a,newpwd:o};e.loadingflag=!0,e.$Http("user.php","POST",n).then(function(t){1===t.code?(sessionStorage.setItem("nihao",""),e.$message.success("密码修改成功，请返回重新登录!"),setTimeout(function(){e.$router.push("/login")},1e3)):e.$message.error(t.message||"密码修改失败!"),e.loadingflag=!1}).catch(function(t){e.loadingflag=!1,e.$message.error("密码修改失败!")})}else e.$message.warning("2次输入的密码不一致，请重新输入!")})}}},P={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{staticClass:"bread-menu",attrs:{separator:"/"}},[i("el-breadcrumb-item",[e._v("首页")]),e._v(" "),i("el-breadcrumb-item",[e._v("账号管理")])],1),e._v(" "),i("div",{staticClass:"user-form-wrap"},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"原始密码",prop:"pwd"}},[i("el-input",{attrs:{type:"password",placeholder:"请输入现在的密码"},model:{value:e.form.pwd,callback:function(t){e.$set(e.form,"pwd",t)},expression:"form.pwd"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"新密码",prop:"newpwd"}},[i("el-input",{attrs:{type:"password",placeholder:"请输入新的密码"},model:{value:e.form.newpwd,callback:function(t){e.$set(e.form,"newpwd",t)},expression:"form.newpwd"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"新密码",prop:"newpwd2"}},[i("el-input",{attrs:{type:"password",placeholder:"请再次输入新的密码"},model:{value:e.form.newpwd2,callback:function(t){e.$set(e.form,"newpwd2",t)},expression:"form.newpwd2"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",loading:e.loadingflag},on:{click:e.onSubmit}},[e._v(e._s(this.loadingflag?"正在修改...":"修改密码"))])],1)],1)],1)],1)},staticRenderFns:[]};var R=i("VU/8")(E,P,!1,function(e){i("P/52")},null,null).exports;a.default.use(r.a);var O=new r.a({routes:[{path:"/login",name:"Login",component:d},{path:"/main",name:"Main",component:f,children:[{path:"/main/projectlist",name:"ProjectList",component:_},{path:"/main/newslist",name:"NewsList",component:y},{path:"/main/addproject",name:"AddProject",component:U},{path:"/main/addnews",name:"AddNews",component:L},{path:"/main/about",name:"About",component:H},{path:"/main/introduce",name:"Introduce",component:V},{path:"/main/user",name:"User",component:R}]}]}),z=i("zL8q"),j=i.n(z),A=(i("tvR6"),i("//Fk")),B=i.n(A);window.baseUrl="http://www.maapoffice.com/admin/";var N="http://www.maapoffice.com/admin/",M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST",i=arguments[2],o=N+e,n=sessionStorage.getItem("nihao")||"";return i=g()({},i,{key:n}),new B.a(function(e,n){fetch(o,{method:t,body:new URLSearchParams(i).toString(),headers:new Headers({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"})}).then(function(e){return e.text()}).then(function(t){return-1===JSON.parse(t).code?(a.default.Router.push("/login"),!1):(e(JSON.parse(t)),t)}).catch(function(e){n(e)})})};i("3f40"),i("4qOc"),i("+cgv");a.default.use(T.a),a.default.Router=O,a.default.use(j.a,{size:"middle",zIndex:3e3}),a.default.Http=a.default.prototype.$Http=M,a.default.config.productionTip=!1,new a.default({el:"#app",router:O,components:{App:n},template:"<App/>"})},"P/52":function(e,t){},Pllc:function(e,t){},Zvzt:function(e,t){},bK70:function(e,t){},ghnD:function(e,t){},tvR6:function(e,t){},wlJq:function(e,t){},yiWn:function(e,t){},zkmf:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6f75b44dcd7cf7dd288a.js.map